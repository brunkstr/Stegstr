:root {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 16px;
  line-height: 1.5;
  font-weight: 400;
  color: #111;
  background-color: #f5f5f5;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-text-size-adjust: 100%;
}

* { box-sizing: border-box; }

a {
  font-weight: 500;
  color: #111;
  text-decoration: inherit;
}
a:hover { color: #111; text-decoration: underline; }

h1 { text-align: center; margin: 0; }

input, button {
  border-radius: 6px;
  border: 1px solid #ccc;
  padding: 0.5rem 1rem;
  font-size: 1rem;
  font-weight: 500;
  font-family: Helvetica, Arial, sans-serif;
  color: #111;
  background-color: #fff;
  transition: border-color 0.2s;
}
input:focus, button:focus { outline: none; border-color: #111; }
input:not([type="checkbox"]):not([type="radio"]),
textarea {
  border-radius: 10px;
  border: 1px solid #ddd;
  padding: 0.65rem 0.85rem;
  background: #fafafa;
  font-size: 1rem;
  line-height: 1.5;
  font-family: Helvetica, Arial, sans-serif;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.03);
}
input:not([type="checkbox"]):not([type="radio"])::placeholder,
textarea::placeholder { color: #8a8a8a; }
input:not([type="checkbox"]):not([type="radio"]):focus,
input:not([type="checkbox"]):not([type="radio"]):focus-visible,
textarea:focus,
textarea:focus-visible {
  outline: none;
  border-color: #111;
  background: #fff;
  box-shadow: 0 0 0 3px rgba(17,17,17,0.12);
}
button { cursor: pointer; }
button:hover { border-color: #111; }
button:active { background-color: #eee; }

/* Header */
.app-root { min-height: 100vh; display: flex; flex-direction: column; }
.top-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  border-bottom: 1px solid #ddd;
  background: #fff;
}
.top-header h1 { margin: 0; font-size: 1.25rem; font-weight: 600; }
.app-title { display: flex; align-items: center; gap: 0.5rem; }
.app-logo { width: 28px; height: 28px; flex-shrink: 0; }
.header-actions { display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; }
.queued-zaps {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.35rem 0.6rem;
  border-radius: 999px;
  background: #111;
  color: #fff;
  border: 1px solid #111;
  font-size: 0.8rem;
}
.queued-zaps:disabled { opacity: 0.6; cursor: not-allowed; }
.queued-zaps-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 1.25rem;
  padding: 0 0.35rem;
  border-radius: 999px;
  background: #fff;
  color: #111;
  font-size: 0.75rem;
  font-weight: 600;
}
.queued-zaps-label { font-size: 0.75rem; opacity: 0.85; }

/* Network toggle */
.network-toggle-wrap { display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; }
.network-label { font-size: 0.9rem; font-weight: 500; }
.network-off-notice {
  flex-basis: 100%;
  font-size: 0.75rem;
  color: #555;
  margin-top: 0.35rem;
  margin-left: 0;
  line-height: 1.35;
}
.network-toggle {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.2rem 0.4rem;
  border-radius: 999px;
  border: 2px solid #bbb;
  background: #e5e5e5;
  cursor: pointer;
  font-size: 0.85rem;
  transition: background 0.2s, border-color 0.2s;
}
.network-toggle.off { background: #e5e5e5; border-color: #bbb; }
.network-toggle.on { background: #111; border-color: #111; }
.network-toggle .toggle-track {
  display: inline-flex;
  width: 2.2rem;
  height: 1.1rem;
  border-radius: 999px;
  background: rgba(0,0,0,0.2);
  position: relative;
  transition: background 0.2s;
}
.network-toggle.on .toggle-track { background: rgba(255,255,255,0.4); }
.network-toggle .toggle-thumb {
  position: absolute;
  top: 2px; left: 2px;
  width: calc(1.1rem - 4px);
  height: calc(1.1rem - 4px);
  border-radius: 50%;
  background: #666;
  transition: transform 0.2s;
}
.network-toggle.on .toggle-thumb {
  transform: translateX(1.1rem);
  background: #fff;
}
.network-toggle .toggle-state { font-weight: 600; min-width: 1.8rem; }
.network-toggle .toggle-state.off { color: #666; }
.network-toggle .toggle-state.on { color: transparent; width: 0; overflow: hidden; min-width: 0; }
.network-toggle.on .toggle-state.off { color: transparent; width: 0; overflow: hidden; min-width: 0; }
.network-toggle.on .toggle-state.on { color: #fff; width: auto; min-width: 1.8rem; }
.network-status { font-weight: 600; font-size: 0.9rem; color: #666; }
.relay-status { font-size: 0.8rem; color: #666; font-style: italic; }

/* Search */
.search-bar-wrap {
  padding: 0.5rem 1rem;
  border-bottom: 1px solid #ddd;
  background: #fff;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
}
.search-input {
  width: 100%;
  max-width: 400px;
  display: block;
  padding: 0.5rem 0.75rem;
  padding-right: 2rem;
}
.search-clear-btn {
  position: absolute;
  right: calc(50% - 200px + 0.5rem);
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: #999;
  cursor: pointer;
  font-size: 0.9rem;
  padding: 0.25rem;
  line-height: 1;
}
.search-clear-btn:hover { color: #333; }

/* Layout */
.primal-layout .body-wrap { display: flex; flex-direction: row; flex: 1; min-height: 0; }
.sidebar {
  width: 260px;
  flex-shrink: 0;
  padding: 1rem;
  border-right: 1px solid #ddd;
  background: #fff;
}
.sidebar.right { border-right: none; border-left: 1px solid #ddd; width: 280px; }

/* Profile card */
.profile-card {
  padding: 1rem;
  background: #fff;
  border-radius: 10px;
  border: 1px solid #ddd;
  margin-bottom: 1rem;
}
.profile-avatar {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  object-fit: cover;
  display: block;
  margin-bottom: 0.5rem;
}
.profile-avatar.placeholder {
  background: #111;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  font-weight: 600;
}
.profile-name { display: block; font-size: 1rem; margin-bottom: 0.25rem; font-weight: 600; }
.profile-about { font-size: 0.85rem; color: #666; margin: 0.5rem 0; line-height: 1.4; }
.profile-note { font-size: 0.75rem; color: #666; margin-top: 0.5rem; }
.btn-secondary { margin-top: 0.5rem; font-size: 0.9rem; padding: 0.4rem 0.8rem; }

/* Nav */
.side-nav { display: flex; flex-direction: column; gap: 0.25rem; }
.side-nav button {
  text-align: left;
  padding: 0.6rem 0.75rem;
  border-radius: 6px;
  border: none;
  background: transparent;
  font-size: 1rem;
}
.side-nav button:hover { background: #eee; }
.side-nav button.active { background: #e0e0e0; color: #111; font-weight: 600; }
.nav-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 1.3em;
  height: 1.3em;
  padding: 0 0.35em;
  margin-left: 0.4em;
  font-size: 0.75rem;
  font-weight: 700;
  line-height: 1;
  color: #fff;
  background: #e74c3c;
  border-radius: 999px;
  vertical-align: middle;
}

/* Main content */
.main-content {
  flex: 1 1 400px;
  min-width: 300px;
  padding: 1rem;
  background: #f5f5f5;
}

/* Compose */
.compose-section {
  display: flex;
  gap: 0.75rem;
  padding: 1rem;
  border-radius: 10px;
  margin-bottom: 1rem;
  background: #fff;
  border: 1px solid #ddd;
}
.compose-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: #111;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  flex-shrink: 0;
}
.compose-avatar img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
.compose-body { flex: 1; min-width: 0; }
.compose-body textarea {
  width: 100%;
  margin-bottom: 0.5rem;
  padding: 0.75rem 0.9rem;
  border-radius: 12px;
  border: 1px solid #ddd;
  background: #fafafa;
  font-size: 1rem;
  line-height: 1.5;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.03);
}
.compose-body textarea::placeholder { color: #8a8a8a; }
.compose-body textarea:focus,
.compose-body textarea:focus-visible {
  outline: none;
  border-color: #111;
  background: #fff;
  box-shadow: 0 0 0 3px rgba(17,17,17,0.12);
}
.compose-actions { display: flex; gap: 0.5rem; align-items: center; flex-wrap: wrap; margin-top: 0.5rem; }
.post-media-preview { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem; }
.post-media-item { display: flex; align-items: center; gap: 0.25rem; }
.post-media-item img { max-width: 120px; max-height: 120px; border-radius: 8px; object-fit: cover; }
.post-media-item .btn-remove { padding: 0.1rem 0.4rem; font-size: 1.2rem; line-height: 1; }
.hidden-input { position: absolute; width: 0; height: 0; opacity: 0; pointer-events: none; }
.edit-media-row { display: flex; gap: 0.5rem; align-items: center; }
.edit-media-row .wide { flex: 1; min-width: 0; }
.compose-body .char-counter, .reply-box .char-counter { font-size: 0.85rem; margin: 0.25rem 0 0.5rem; }
.btn-primary { background: #111; color: #fff; border-color: #111; }
.btn-primary:hover { background: #333; border-color: #333; }

/* Feed & notes */
.feed-section { margin-top: 0.5rem; }
.feed-header-row { display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.75rem; }
.feed-title { font-size: 1.1rem; margin: 0; font-weight: 600; }
.feed-filter-tabs { display: flex; gap: 0.25rem; }
.feed-filter-tabs button { padding: 0.35rem 0.75rem; font-size: 0.9rem; border-radius: 6px; border: 1px solid #ddd; background: #fff; }
.feed-filter-tabs button.active { background: #111; color: #fff; border-color: #111; }
.feed-filter-tabs button:hover:not(.active) { background: #eee; }
.note-list { list-style: none; padding: 0; margin: 0; }
.loading-more-indicator { text-align: center; padding: 1rem; }
.note-card {
  display: flex;
  gap: 0.75rem;
  padding: 1rem;
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 12px;
  margin-bottom: 0.75rem;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}
.note-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: #e0e0e0;
  color: #666;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  flex-shrink: 0;
}
.note-avatar img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
.note-body { flex: 1; min-width: 0; }
.note-meta { display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.25rem; }
.note-meta strong { font-size: 0.95rem; }
button.link-like {
  background: none;
  border: none;
  padding: 0;
  font: inherit;
  color: inherit;
  cursor: pointer;
  text-decoration: none;
}
button.link-like:hover { text-decoration: underline; }
.note-time { font-size: 0.8rem; color: #666; }
.note-content p { margin: 0 0 0.5rem; white-space: pre-wrap; word-break: break-word; }
.note-images { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem; }
.note-img { max-width: 100%; max-height: 300px; border-radius: 8px; object-fit: cover; }
.note-video { max-height: 360px; object-fit: contain; }
.note-actions {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.5rem;
  margin-top: 0.75rem;
}
.note-action-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.35rem 0.65rem;
  font-size: 0.85rem;
  background: #f7f7f7;
  border: 1px solid transparent;
  border-radius: 999px;
  white-space: nowrap;
}
.note-action-btn:hover { background: #eee; border-color: #ddd; }
.note-action-btn:disabled { opacity: 0.6; cursor: not-allowed; }
.note-action-btn.is-active { background: #111; color: #fff; border-color: #111; }
.note-action-btn.is-active:hover { background: #222; border-color: #222; }
.action-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 1.1rem;
  padding: 0 0.4rem;
  border-radius: 999px;
  border: 1px solid #ddd;
  background: #fff;
  font-size: 0.75rem;
  color: #444;
}
.note-action-btn.is-active .action-count {
  border-color: rgba(255,255,255,0.4);
  background: rgba(255,255,255,0.2);
  color: #fff;
}

.wide { width: 100%; max-width: 600px; box-sizing: border-box; }
.wide { max-width: none; }
textarea { resize: vertical; min-height: 60px; }

.muted { color: #666; font-size: 0.9rem; }
.status { color: #111; font-size: 0.9rem; padding: 0.5rem 1rem; background: #e8f5e9; border-radius: 6px; margin: 0.5rem 1rem; border: 1px solid #c8e6c9; }
.error { color: #111; font-size: 0.9rem; font-weight: 600; }

.info-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  border: 1px solid #bbb;
  color: #555;
  font-size: 0.7rem;
  line-height: 1;
  cursor: help;
  position: relative;
  margin-left: 0.35rem;
}
.info-icon::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 130%;
  left: 50%;
  transform: translateX(-50%);
  background: #111;
  color: #fff;
  padding: 0.45rem 0.6rem;
  border-radius: 6px;
  font-size: 0.75rem;
  line-height: 1.35;
  width: max-content;
  max-width: 260px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.15s;
  z-index: 20;
}
.info-icon::before {
  content: "";
  position: absolute;
  bottom: 120%;
  left: 50%;
  transform: translateX(-50%);
  border: 6px solid transparent;
  border-top-color: #111;
  opacity: 0;
  transition: opacity 0.15s;
  pointer-events: none;
}
.info-icon:hover::after,
.info-icon:focus::after,
.info-icon:hover::before,
.info-icon:focus::before { opacity: 1; }

/* Reply box */
.reply-box {
  padding: 1rem;
  background: #f9f9f9;
  border-radius: 8px;
  margin-top: 1rem;
  border: 1px solid #ddd;
}
.reply-box textarea {
  margin: 0.5rem 0;
  padding: 0.7rem 0.85rem;
  border-radius: 10px;
  border: 1px solid #ddd;
  background: #fff;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.03);
}
.reply-box textarea:focus,
.reply-box textarea:focus-visible {
  outline: none;
  border-color: #111;
  box-shadow: 0 0 0 3px rgba(17,17,17,0.12);
}

/* Messages */
.messages-view, .followers-view, .bookmarks-view, .explore-view, .notifications-view, .profile-view, .settings-view { padding: 1rem 0; }
.messages-view h2 { margin-bottom: 0.5rem; }
.messages-view > .muted { margin-bottom: 1rem; }
.btn-delete { font-size: 0.85rem; }
.messages-layout { display: flex; gap: 1.5rem; margin-top: 1rem; min-height: 420px; }
.conversation-list-wrap { width: 260px; flex-shrink: 0; display: flex; flex-direction: column; gap: 0.75rem; }
.btn-new-message { width: 100%; margin-bottom: 0.25rem; padding: 0.65rem 1rem; }
.conversation-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 0.5rem; }
.conversation-list li { margin: 0; }
.conversation-item {
  width: 100%;
  text-align: left;
  padding: 0.85rem 1rem;
  border-radius: 8px;
  border: 1px solid #ddd;
  background: #fff;
  cursor: pointer;
  display: block;
}
.conversation-item:hover { background: #eee; }
.conversation-list li.active .conversation-item { background: #e0e0e0; border-color: #ccc; }
.conversation-name { display: block; font-weight: 600; font-size: 0.95rem; margin-bottom: 0.25rem; }
.conversation-preview { display: block; font-size: 0.8rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.thread-wrap {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  border: 1px solid #ddd;
  border-radius: 10px;
  background: #fff;
  padding: 1.25rem 1.5rem;
}
.thread-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid #ddd; flex-wrap: wrap; gap: 0.5rem; }
.btn-back { font-size: 0.9rem; padding: 0.5rem 0.75rem; }
.thread-messages { list-style: none; padding: 0; margin: 0; flex: 1; overflow-y: auto; min-height: 120px; }
.thread-messages li { padding: 0.85rem 0; border-bottom: 1px solid #eee; }
.thread-messages li:last-child { border-bottom: none; }
.msg-meta { font-size: 0.8rem; display: block; margin-bottom: 0.35rem; color: #666; }
.msg-content { margin: 0.25rem 0 0; white-space: pre-wrap; word-break: break-word; line-height: 1.45; }
.thread-reply {
  margin-top: 1.25rem;
  padding-top: 1rem;
  border-top: 1px solid #ddd;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}
.thread-reply textarea {
  width: 100%;
  min-height: 4rem;
  margin: 0;
  resize: vertical;
  padding: 0.7rem 0.85rem;
  border-radius: 10px;
  border: 1px solid #ddd;
  background: #fff;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.03);
}
.thread-reply textarea:focus,
.thread-reply textarea:focus-visible {
  outline: none;
  border-color: #111;
  box-shadow: 0 0 0 3px rgba(17,17,17,0.12);
}
.thread-reply .btn-primary { align-self: flex-start; }

/* Steganography sidebar */
.widget { padding: 1rem; background: #fff; border-radius: 10px; border: 1px solid #ddd; }
.steganography-widget .stego-actions { display: flex; flex-direction: column; gap: 0.5rem; margin-top: 0.75rem; }
.stego-drop-zone {
  border: 2px dashed #ccc;
  border-radius: 8px;
  padding: 1rem;
  margin: 0.5rem 0;
  text-align: center;
  font-size: 0.9rem;
  color: #666;
  background: #fafafa;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s;
}
.stego-drop-zone:hover { border-color: #999; background: #f0f0f0; }
.stego-drop-zone.drag-active { border-color: #4a90d9; background: #e8f0fe; }
.detect-status { margin: 0.25rem 0; font-style: italic; }
.stego-progress { margin: 0.5rem 0; }
.stego-log { margin-top: 0.75rem; font-size: 0.75rem; }
.stego-log summary { cursor: pointer; color: #666; font-weight: 500; }
.stego-log-content {
  margin: 0.25rem 0 0;
  padding: 0.5rem;
  background: #1a1a1a;
  color: #0f0;
  border-radius: 4px;
  font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
  font-size: 0.7rem;
  line-height: 1.4;
  max-height: 150px;
  overflow-y: auto;
  white-space: pre-wrap;
  word-break: break-all;
}
.progress-bar {
  width: 100%;
  height: 4px;
  background: #e0e0e0;
  border-radius: 2px;
  overflow: hidden;
  margin-top: 0.25rem;
}
.progress-bar-indeterminate {
  width: 30%;
  height: 100%;
  background: linear-gradient(90deg, #666, #333, #666);
  border-radius: 2px;
  animation: progress-slide 1.5s ease-in-out infinite;
}
@keyframes progress-slide {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(400%); }
}
.btn-stego { width: 100%; }
.btn-quick-test { font-size: 0.85rem; background: #e8f5e9; border-color: #4caf50; color: #2e7d32; }
.btn-quick-test:hover { background: #c8e6c9; }
.acting-identity { font-size: 0.8rem; color: #555; margin-left: 0.5rem; }
.identity-view .identity-actions { display: flex; gap: 0.5rem; margin: 1rem 0; }
.identity-view-desc { font-size: 0.9rem; margin: 0.5rem 0 1rem; max-width: 560px; line-height: 1.45; }
.identity-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 1rem; }
.identity-card { background: #fafafa; border: 1px solid #e5e5e5; border-radius: 10px; padding: 1rem; display: flex; flex-direction: column; gap: 0.75rem; }
.identity-card-header { display: flex; flex-wrap: wrap; align-items: center; gap: 0.5rem 1rem; }
.identity-card-name { font-weight: 600; font-size: 1rem; }
.identity-card-type { font-size: 0.75rem; padding: 0.2rem 0.5rem; border-radius: 6px; background: #e8e8e8; color: #555; text-transform: capitalize; }
.identity-card-type[data-type="nostr"] { background: #d0d0d0; color: #333; }
.identity-card-view, .identity-card-act { display: inline-flex; align-items: center; gap: 0.3rem; font-size: 0.85rem; cursor: pointer; }
.identity-card-remove { margin-left: auto; font-size: 0.8rem; color: #888; background: none; border: none; cursor: pointer; padding: 0.2rem 0.4rem; }
.identity-card-remove:hover { color: #c00; text-decoration: underline; }
.identity-card-pubkey {
  font-family: monospace;
  font-size: 0.75rem;
  word-break: break-all;
  color: #555;
  display: flex;
  align-items: center;
  gap: 0.4rem;
}
.identity-card-pubkey .pubkey-copy { cursor: pointer; }
.identity-card-pubkey .pubkey-copy:hover { text-decoration: underline; color: #111; }
.identity-card-category { display: flex; align-items: center; gap: 0.6rem; flex-wrap: wrap; }
.identity-category-badge { font-size: 0.85rem; font-weight: 600; padding: 0.35rem 0.65rem; border-radius: 6px; background: #e0e0e0; color: #333; }
.identity-category-badge[data-category="nostr"] { background: #888; color: #fff; }
.identity-convert-btn { font-size: 0.9rem; padding: 0.4rem 0.85rem; border-radius: 6px; background: #fff; border: 1px solid #666; color: #333; cursor: pointer; font-weight: 500; }
.identity-convert-btn:hover { background: #eee; border-color: #444; }
.identity-convert-info { cursor: help; font-size: 1rem; color: #555; margin-left: 0.15rem; }
.identity-convert-info:hover { color: #111; }
.identity-card-private { display: inline-flex; align-items: center; gap: 0.3rem; font-size: 0.85rem; color: #555; cursor: pointer; margin-left: auto; }
.event-identity-tag { font-size: 0.7rem; color: #666; background: #f0f0f0; padding: 0.1rem 0.3rem; border-radius: 4px; margin-left: 0.25rem; }
.widget h3 { margin: 0 0 0.5rem; font-size: 1rem; font-weight: 600; }

/* Other views */
.profile-view .profile-card-main { max-width: 400px; }
.profile-view .pubkey-display { font-family: monospace; font-size: 0.8rem; }
.pubkey-copy { cursor: pointer; word-break: break-all; user-select: all; }
.pubkey-copy:hover { text-decoration: underline; }
.profile-header-card { background: #fff; border: 1px solid #ddd; border-radius: 10px; overflow: hidden; margin-bottom: 1rem; }
.profile-banner-wrap { width: 100%; height: 160px; overflow: hidden; background: #eee; }
.profile-banner { width: 100%; height: 100%; object-fit: cover; }
.profile-banner-placeholder { width: 100%; height: 120px; background: #ddd; }
.profile-header-body { padding: 0 1rem 1rem; position: relative; }
.profile-avatar-overlay { margin-top: -48px; margin-bottom: 0.5rem; border: 3px solid #fff; box-shadow: 0 0 0 1px #ddd; }
.profile-stats { display: flex; gap: 1rem; margin: 0.5rem 0; font-size: 0.9rem; color: #666; }
.profile-stats strong { color: #111; }
.profile-section-title { font-size: 1rem; margin: 1rem 0 0.5rem; font-weight: 600; }
.settings-section { font-size: 1rem; margin: 1rem 0 0.5rem; font-weight: 600; }
.settings-list { list-style: none; padding: 0; margin: 0; }
.settings-list li { padding: 0.25rem 0; }
.settings-list-item { display: flex; align-items: center; justify-content: space-between; gap: 0.5rem; }
.settings-identity-item { flex-direction: column; align-items: stretch; }
.settings-identity-item .pubkey-copy { margin-top: 0.25rem; }
.settings-sub { font-size: 0.9rem; margin: 0.5rem 0 0.25rem; color: #666; }
.mute-add-wrap { display: flex; gap: 0.5rem; margin: 0.5rem 0; align-items: center; }
.mute-add-wrap input { flex: 1; min-width: 0; }
.contact-list { list-style: none; padding: 0; }
.contact-list li { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0; }
.contact-list-item { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0; flex-wrap: wrap; }
.contact-list-item .btn-unfollow { margin-left: auto; font-size: 0.85rem; padding: 0.25rem 0.5rem; }
.contact-avatar { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; }
.contact-avatar.placeholder { background: #e0e0e0; font-size: 0.75rem; display: flex; align-items: center; justify-content: center; }
.following-add-wrap { display: flex; gap: 0.5rem; margin-bottom: 1rem; align-items: center; }
.following-add-wrap input { flex: 1; min-width: 0; }
.event-list { list-style: none; padding: 0; margin: 0; }
.event {
  padding: 0.75rem;
  border: 1px solid #ddd;
  border-radius: 8px;
  margin-bottom: 0.5rem;
  background: #fff;
}
.event-meta { font-size: 0.8rem; color: #666; }
.event-content { margin: 0.5rem 0 0; white-space: pre-wrap; word-break: break-word; }
.notification-item .view-post-link { display: inline-block; margin-top: 0.5rem; font-size: 0.85rem; }
.note-thread.focused { outline: 2px solid #111; outline-offset: 2px; border-radius: 10px; }
.repost-label { margin: 0 0 0.25rem; font-size: 0.85rem; }

/* Search profile results */
.search-profiles-section { margin-bottom: 1rem; }
.search-section-title { font-size: 0.95rem; margin: 0 0 0.5rem; color: #666; }
.profile-result-list { list-style: none; padding: 0; margin: 0; }
.profile-result-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.6rem 0; border-bottom: 1px solid #eee; }
.profile-result-item:last-child { border-bottom: none; }
.profile-result-info { flex: 1; min-width: 0; }
.profile-result-card { padding: 1rem; background: #f8f8f8; border-radius: 8px; margin-bottom: 1rem; border: 1px solid #eee; }
.profile-result-card .btn-primary { margin-top: 0.5rem; }
.profiles-search { margin-bottom: 1rem; }

/* Modals */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}
.modal {
  background: #fff;
  border-radius: 10px;
  padding: 1.5rem;
  max-width: 420px;
  width: 90%;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
  border: 1px solid #ddd;
}
.modal-wide { max-width: 500px; }
.modal-wide .profiles-search { max-height: 240px; overflow-y: auto; }
.modal h3 { margin: 0 0 1rem; font-size: 1.1rem; font-weight: 600; }
.modal label { display: block; margin-bottom: 0.75rem; font-size: 0.9rem; }
.modal label input, .modal label textarea { margin-top: 0.25rem; }
.modal-actions { justify-content: flex-end; gap: 0.5rem; margin-top: 1rem; display: flex; }
.embed-modal .embed-options { margin: 1rem 0; display: flex; flex-direction: column; gap: 0.5rem; }
.embed-option { display: flex; align-items: center; gap: 0.5rem; cursor: pointer; }
.embed-recipients { margin-top: 1rem; padding-top: 0.75rem; border-top: 1px solid #ddd; }
.embed-recipient-list { list-style: none; padding: 0; margin: 0.5rem 0 0; max-height: 200px; overflow-y: auto; }
.embed-recipient-list li { padding: 0.35rem 0; }
.embed-recipient-list label { display: flex; align-items: center; gap: 0.5rem; cursor: pointer; }
.embed-method-selector { margin: 0.75rem 0; }
.embed-section-label { font-weight: 500; font-size: 0.9rem; margin-bottom: 0.25rem; display: block; }
.embed-platform-selector { margin: 0.75rem 0; }
.embed-platform-selector select {
  width: 100%;
  padding: 0.4rem;
  font-size: 0.9rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  background: #fff;
}

/* Reply threads */
.note-thread { margin-bottom: 0; }
.note-replies {
  list-style: none;
  padding: 0 0 0 1.75rem;
  margin: 0 0 0.75rem 0;
  border-left: 1px solid #e2e2e2;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}
.note-reply {
  margin-top: 0;
  padding: 0.85rem;
  background: #fafafa;
  border: 1px solid #eee;
  border-radius: 10px;
}
.note-reply .note-avatar { width: 36px; height: 36px; font-size: 0.9rem; }
.note-reply .note-meta strong { font-size: 0.9rem; }
.note-reply .note-content p { font-size: 0.9rem; }

/* Profile tabs */
.profile-tabs {
  display: flex;
  gap: 0;
  margin: 1rem 0;
  border-bottom: 1px solid #ddd;
}
.profile-tab {
  padding: 0.75rem 1.5rem;
  background: none;
  border: none;
  border-bottom: 3px solid transparent;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 500;
  color: #666;
  transition: border-color 0.2s, color 0.2s;
}
.profile-tab:hover { color: #333; }
.profile-tab.active {
  color: #111;
  border-bottom-color: #111;
}

/* Reply thread with parent context */
.reply-thread { position: relative; }
.note-parent {
  opacity: 0.8;
  border-left: 3px solid #ddd;
  margin-left: 1rem;
  padding-left: 0.75rem;
}
.note-parent-missing {
  padding: 0.5rem 1rem;
  background: #f5f5f5;
  border-radius: 4px;
  margin-left: 1rem;
}
.note-content-preview p {
  color: #666;
  font-size: 0.9rem;
}
.note-avatar-small { width: 32px; height: 32px; font-size: 0.8rem; }
.thread-connector {
  width: 2px;
  height: 1rem;
  background: #ddd;
  margin-left: 2rem;
}

/* Identity secret key reveal */
.identity-card-nsec {
  margin-top: 0.5rem;
}
.identity-show-nsec-btn {
  font-size: 0.8rem;
  padding: 0.25rem 0.5rem;
  background: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 4px;
  cursor: pointer;
}
.identity-show-nsec-btn:hover {
  background: #eee;
}
.identity-nsec-reveal {
  margin-top: 0.5rem;
  padding: 0.75rem;
  background: #fff8e6;
  border: 1px solid #f0c040;
  border-radius: 4px;
}
.nsec-warning {
  font-size: 0.85rem;
  color: #856404;
  margin: 0 0 0.5rem 0;
}
.nsec-value {
  display: block;
  word-break: break-all;
  font-size: 0.75rem;
  background: #fff;
  padding: 0.5rem;
  border: 1px solid #ddd;
  border-radius: 4px;
  margin-bottom: 0.5rem;
}
.nsec-copy-btn {
  font-size: 0.8rem;
  padding: 0.25rem 0.75rem;
  background: #111;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}
.nsec-copy-btn:hover {
  background: #333;
}

.row { display: flex; justify-content: center; align-items: center; gap: 0.5rem; flex-wrap: wrap; }

@media (prefers-color-scheme: dark) {
  :root { color: #eee; background-color: #1a1a1a; }
  a { color: #eee; }
  a:hover { color: #fff; }
  input, button {
    color: #eee;
    background-color: #2a2a2a;
    border-color: #444;
  }
  input:not([type="checkbox"]):not([type="radio"]),
  textarea,
  select {
    background: #262626;
    border-color: #444;
    color: #eee;
  }
  .embed-platform-selector select { background: #262626; color: #eee; border-color: #444; }
  .embed-advanced { border-color: #444 !important; }
  input:not([type="checkbox"]):not([type="radio"])::placeholder,
  textarea::placeholder { color: #9a9a9a; }
  input:not([type="checkbox"]):not([type="radio"]):focus,
  input:not([type="checkbox"]):not([type="radio"]):focus-visible,
  textarea:focus,
  textarea:focus-visible {
    border-color: #eee;
    background: #2a2a2a;
    box-shadow: 0 0 0 3px rgba(238,238,238,0.15);
  }
  button:hover { border-color: #eee; }
  button:active { background-color: #333; }
  .top-header, .sidebar, .profile-card, .profile-header-card, .note-card, .compose-section, .widget,
  .conversation-item, .thread-wrap, .modal, .event, .reply-box, .search-bar-wrap { background: #2a2a2a; border-color: #444; }
  .profile-banner-placeholder { background: #333; }
  .note-thread.focused { outline-color: #eee; }
  .profile-stats strong { color: #eee; }
  .main-content { background: #1a1a1a; }
  .side-nav button:hover { background: #333; }
  .side-nav button.active { background: #333; color: #eee; }
  .note-action-btn { background: #333; border-color: #444; color: #eee; }
  .note-action-btn:hover { background: #3a3a3a; border-color: #555; }
  .note-action-btn.is-active { background: #eee; color: #111; border-color: #eee; }
  .note-action-btn.is-active:hover { background: #fff; border-color: #fff; }
  .action-count { background: #2a2a2a; border-color: #444; color: #ccc; }
  .note-action-btn.is-active .action-count { background: #111; border-color: #111; color: #eee; }
  .queued-zaps { background: #eee; color: #111; border-color: #eee; }
  .queued-zaps-count { background: #111; color: #eee; }
  .info-icon { border-color: #666; color: #ccc; }
  .info-icon::after { background: #eee; color: #111; }
  .info-icon::before { border-top-color: #eee; }
  .conversation-item:hover { background: #333; }
  .conversation-list li.active .conversation-item { background: #333; }
  .btn-primary { background: #eee; color: #111; border-color: #eee; }
  .btn-primary:hover { background: #fff; border-color: #fff; }
  .profile-avatar.placeholder, .compose-avatar { background: #eee; color: #111; }
  .network-toggle.on { background: #eee; border-color: #eee; }
  .network-toggle.on .toggle-thumb { background: #111; }
  .network-toggle.on .toggle-state.on { color: #111; }
  .muted, .profile-note, .profile-about, .relay-status, .note-time, .event-meta, .msg-meta { color: #b0b0b0; }
  .note-avatar { color: #b0b0b0; }
  .network-toggle .toggle-state.off, .network-status { color: #b0b0b0; }
  .network-off-notice { color: #a0a0a0; }
  .note-replies { border-left-color: #444; }
  .note-reply { background: #2f2f2f; border-color: #444; }
  .compose-body textarea,
  .reply-box textarea,
  .thread-reply textarea {
    background: #262626;
    border-color: #444;
    color: #eee;
  }
  .compose-body textarea::placeholder,
  .reply-box textarea::placeholder,
  .thread-reply textarea::placeholder { color: #9a9a9a; }
  .compose-body textarea:focus,
  .compose-body textarea:focus-visible,
  .reply-box textarea:focus,
  .reply-box textarea:focus-visible,
  .thread-reply textarea:focus,
  .thread-reply textarea:focus-visible {
    border-color: #eee;
    background: #2a2a2a;
    box-shadow: 0 0 0 3px rgba(238,238,238,0.15);
  }
  /* Profile tabs dark mode */
  .profile-tabs { border-bottom-color: #444; }
  .profile-tab { color: #999; }
  .profile-tab:hover { color: #ccc; }
  .profile-tab.active { color: #eee; border-bottom-color: #eee; }
  /* Reply parent dark mode */
  .note-parent { border-left-color: #444; }
  .note-parent-missing { background: #333; }
  .note-content-preview p { color: #999; }
  .thread-connector { background: #444; }
  /* Nsec reveal dark mode */
  .identity-show-nsec-btn { background: #333; border-color: #444; color: #eee; }
  .identity-show-nsec-btn:hover { background: #444; }
  .identity-nsec-reveal { background: #3d3520; border-color: #8b7a40; }
  .nsec-warning { color: #d4a84a; }
  .nsec-value { background: #2a2a2a; border-color: #444; color: #eee; }
  .nsec-copy-btn { background: #eee; color: #111; }
  .nsec-copy-btn:hover { background: #fff; }
  /* Identity: readable text and no blue */
  .identity-view-desc, .identity-card-name { color: #eee; }
  .identity-card { background: #2a2a2a; border-color: #444; }
  .identity-card-type { background: #444; color: #ddd; }
  .identity-card-type[data-type="nostr"] { background: #555; color: #eee; }
  .identity-card-remove { color: #aaa; }
  .identity-card-remove:hover { color: #f66; }
  .identity-card-pubkey, .identity-card-pubkey .pubkey-copy { color: #b0b0b0; }
  .identity-card-pubkey .pubkey-copy:hover { color: #eee; }
  .identity-category-badge { background: #444; color: #eee; }
  .identity-category-badge[data-category="nostr"] { background: #555; color: #eee; }
  .identity-convert-btn { background: #333; border-color: #666; color: #eee; }
  .identity-convert-btn:hover { background: #444; border-color: #888; }
  .identity-convert-info { color: #b0b0b0; }
  .identity-convert-info:hover { color: #eee; }
  .identity-card-private { color: #b0b0b0; }
  .acting-identity { color: #b0b0b0; }
  .identity-card-view, .identity-card-act { color: #eee; }
}

/* Toast notifications */
.toast-container {
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  max-width: 400px;
}
.toast {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  animation: toast-in 0.2s ease-out;
  font-size: 0.9rem;
}
.toast-success { background: #e8f5e9; color: #2e7d32; border: 1px solid #a5d6a7; }
.toast-error { background: #ffebee; color: #c62828; border: 1px solid #ef9a9a; }
.toast-info { background: #e3f2fd; color: #1565c0; border: 1px solid #90caf9; }
.toast-message { flex: 1; }
.toast-dismiss {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 1.2rem;
  line-height: 1;
  padding: 0 0.25rem;
  opacity: 0.6;
  color: inherit;
}
.toast-dismiss:hover { opacity: 1; }
@keyframes toast-in {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@media (prefers-color-scheme: dark) {
  .toast-success { background: #1b3a1b; color: #81c784; border-color: #2e7d32; }
  .toast-error { background: #3a1b1b; color: #ef9a9a; border-color: #c62828; }
  .toast-info { background: #1b2a3a; color: #90caf9; border-color: #1565c0; }
}
